function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var SUG={};SUG.App=function(d){var s=d("#su-generator"),o=d("#su-generator-search"),i=d("#su-generator-filter"),e=i.children("a"),u=d("#su-generator-choices"),c=u.find("span"),l=d("#su-generator-settings"),g=d("#su-compatibility-mode-prefix"),a=d("#su-generator-result"),p=d("#su-generator-selected"),f={state:{mceSelection:"",target:"",wpActiveEditor:null,context:"",insertArgs:"",preview:{timer:null,request:null}}};return f.el={body:d("body")},f.init=function(){var a;e.click(function(e){var t=d(this).data("filter");if("all"===t)c.css({opacity:1}).removeClass("su-generator-choice-first");else{var r=new RegExp(t,"gi");c.css({opacity:.2}),c.each(function(){null!==d(this).data("group").match(r)&&d(this).css({opacity:1}).removeClass("su-generator-choice-first")})}e.preventDefault()}),d("#su-generator").on("click",".su-generator-home",function(e){o.val(""),l.html("").hide(),s.removeClass("su-generator-narrow"),i.show(),u.show(),c.show(),f.state.mceSelection="",o.focus(),e.preventDefault()}),d("#su-generator").on("click",".su-generator-close",function(e){d.magnificPopup.close(),e.preventDefault()}),o.on({focus:function(){d(this).val(""),l.html("").hide(),s.removeClass("su-generator-narrow"),u.show(),c.css({opacity:1}).removeClass("su-generator-choice-first"),i.show()},blur:function(){},keyup:function(e){var t=d(".su-generator-choice-first:first"),n=d(this).val(),a=new RegExp(n,"gi"),s=0;13===e.keyCode&&0<t.length&&(e.preventDefault(),d(this).val("").blur(),t.trigger("click")),c.css({opacity:.2}).removeClass("su-generator-choice-first"),c.each(function(){var e=d(this).data(),t=e.shortcode,r=[t,e.name,e.desc,e.group].join(" ").match(a);null!==r&&(d(this).css({opacity:1}),n===t?(c.removeClass("su-generator-choice-first"),d(this).addClass("su-generator-choice-first"),s=999):r.length>s&&(c.removeClass("su-generator-choice-first"),d(this).addClass("su-generator-choice-first"),s=r.length))}),""===n&&c.removeClass("su-generator-choice-first")}}),c.on("click",function(e){var r=d(this).data("shortcode");d.ajax({type:"POST",url:ajaxurl,data:{action:"su_generator_settings",shortcode:r},beforeSend:function(){d("#su-generator-preview").hide(),u.hide(),l.addClass("su-generator-loading").show(),s.addClass("su-generator-narrow"),i.hide()},success:function(e){l.removeClass("su-generator-loading"),l.html(e);var t=d("#su-generator-content");void 0!==f.state.mceSelection&&""!==f.state.mceSelection&&"hidden"!==t.attr("type")&&t.val(f.state.mceSelection),d(".su-generator-range-picker").each(function(e){var t=d(this).find("input"),r=t.attr("min"),n=t.attr("max"),a=t.attr("step");t.simpleSlider({snap:!0,step:a,range:[r,n]}),t.show(),t.on("keyup blur",function(e){t.simpleSlider("setValue",t.val())})}),d(".su-generator-select-color").each(function(e){d(this).find(".su-generator-select-color-wheel").filter(":first").farbtastic(".su-generator-select-color-value:eq("+e+")"),d(this).find(".su-generator-select-color-value").focus(function(){d(".su-generator-select-color-wheel:eq("+e+")").show()}),d(this).find(".su-generator-select-color-value").blur(function(){d(".su-generator-select-color-wheel:eq("+e+")").hide()})}),d(".su-generator-isp").each(function(){function n(){var e="none",t="",r=i.val();if("media"===r){var n=[];u.find("span").each(function(e){n[e]=d(this).data("id")}),0<n.length&&(t=n.join(","))}else if("category"===r){var a=c.val()||[];0<a.length&&(t=a.join(","))}else if("taxonomy"===r){var s=l.val()||"",o=g.val()||[];"0"!==s&&0<o.length&&(e="taxonomy: "+s+"/"+o.join(","))}else e="0"===r?"none":r;""!==t&&(e=r+": "+t),p.val(e).trigger("change")}var t,r=d(this),i=r.find(".su-generator-isp-sources"),a=r.find(".su-generator-isp-source"),e=r.find(".su-generator-isp-add-media"),u=r.find(".su-generator-isp-images"),c=r.find(".su-generator-isp-categories"),l=r.find(".su-generator-isp-taxonomies"),g=d(".su-generator-isp-terms"),p=r.find(".su-generator-attr");i.on("change",function(e){var t=d(this).val();e.preventDefault(),a.removeClass("su-generator-isp-source-open"),-1===t.indexOf(":")&&r.find(".su-generator-isp-source-"+t).addClass("su-generator-isp-source-open"),n()}),u.on("click","span i",function(){d(this).parent("span").css("border-color","#f03").fadeOut(300,function(){d(this).remove(),n()})}),e.click(function(e){e.preventDefault(),void 0!==t&&t.close(),(t=wp.media.frames.su_media_frame_1=wp.media({title:SUGL10n.isp_media_title,library:{type:"image"},button:{text:SUGL10n.isp_media_insert},multiple:!0})).on("open",function(){d(".mfp-wrap").addClass("hidden")}),t.on("close",function(){d(".mfp-wrap").removeClass("hidden")}),t.on("select",function(){var e=t.state().get("selection").toJSON();u.find("em").remove(),d.each(e,function(e){u.append('<span data-id="'+this.id+'" title="'+this.title+'"><img src="'+this.url+'" alt="" /><i class="sui sui-times"></i></span>')}),n()}).open()}),u.sortable({revert:200,containment:r,tolerance:"pointer",stop:function(){n()}}),c.on("change",n),g.on("change",n),l.on("change",function(){var t=d(this).parents(".su-generator-isp-source"),e=d(this).val();if(g.hide().find("option").remove(),n(),"0"!==e)var r=d.ajax({url:ajaxurl,type:"post",dataType:"html",data:{action:"su_generator_get_terms",tax:e,class:"su-generator-isp-terms",multiple:!0,size:10},beforeSend:function(){"object"===_typeof(r)&&r.abort(),g.html("").attr("disabled",!0).hide(),t.addClass("su-generator-loading")},success:function(e){g.html(e).attr("disabled",!1).show(),t.removeClass("su-generator-loading")}})})}),d(".su-generator-upload-button").each(function(){var t,e=d(this),r=d(this).parents(".su-generator-attr-container").find("input:text");e.on("click",function(e){e.preventDefault(),e.stopPropagation(),void 0!==t&&t.close(),(t=wp.media.frames.su_media_frame_2=wp.media({title:SUGL10n.upload_title,button:{text:SUGL10n.upload_insert},multiple:!1})).on("select",function(){var e=t.state().get("selection").first().toJSON();r.val(e.url).trigger("change")}),t.on("open",function(){d(".mfp-wrap").addClass("hidden")}),t.on("close",function(){d(".mfp-wrap").removeClass("hidden")}),t.open()})}),d(".su-generator-icon-picker-button").each(function(){var e=d(this),t=d(this).parents(".su-generator-attr-container"),n=t.find(".su-generator-attr"),a=t.find(".su-generator-icon-picker"),s=a.find("input:text");e.click(function(e){a.toggleClass("su-generator-icon-picker-visible"),s.val("").trigger("keyup"),a.hasClass("su-generator-icon-picker-loaded")||(d.ajax({type:"post",url:ajaxurl,data:{action:"su_generator_get_icons"},dataType:"html",beforeSend:function(){a.addClass("su-generator-loading"),a.addClass("su-generator-icon-picker-loaded")},success:function(e){a.append(e);var r=a.children("i");r.click(function(e){n.val("icon: "+d(this).attr("title")),a.removeClass("su-generator-icon-picker-visible"),n.trigger("change"),e.preventDefault()}),s.on({keyup:function(){var e=d(this).val(),t=new RegExp(e,"gi");r.hide(),r.each(function(){null!==d(this).attr("title").match(t)&&d(this).show()})},focus:function(){d(this).val(""),r.show()}}),a.removeClass("su-generator-loading")}}),e.preventDefault())})}),d(".su-generator-switch").click(function(e){var t=d(this).parent().children("input");"yes"===t.val()?t.val("no").trigger("change"):t.val("yes").trigger("change"),e.preventDefault()}),d(".su-generator-switch-value").on("change",function(){var e=d(this),t=e.parent().children(".su-generator-switch"),r=e.val();"yes"===r?t.removeClass("su-generator-switch-no").addClass("su-generator-switch-yes"):"no"===r&&t.removeClass("su-generator-switch-yes").addClass("su-generator-switch-no")}),d("select#su-generator-attr-taxonomy").on("change",function(){var e=d(this).val(),t=d("select#su-generator-attr-tax_term");window.su_generator_get_terms=d.ajax({type:"POST",url:ajaxurl,data:{action:"su_generator_get_terms",tax:e,noselect:!0},dataType:"html",beforeSend:function(){"object"===_typeof(window.su_generator_get_terms)&&window.su_generator_get_terms.abort(),t.parent().addClass("su-generator-loading")},success:function(e){t.find("option").remove(),t.append(e),t.parent().removeClass("su-generator-loading")}})}),d(".su-generator-shadow-picker").each(function(e){var t=d(this),r=t.find(".su-generator-shadow-picker-field input"),n=t.find(".su-generator-sp-hoff"),a=t.find(".su-generator-sp-voff"),s=t.find(".su-generator-sp-blur"),o={cnt:t.find(".su-generator-shadow-picker-color"),value:t.find(".su-generator-shadow-picker-color-value"),wheel:t.find(".su-generator-shadow-picker-color-wheel")},i=t.find(".su-generator-attr");o.wheel.farbtastic(o.value),o.value.focus(function(){o.wheel.show()}),o.value.blur(function(){o.wheel.hide()}),r.on("change blur keyup",function(){i.val(n.val()+"px "+a.val()+"px "+s.val()+"px "+o.value.val()).trigger("change")}),i.on("keyup",function(){var e=d(this).val().split(" ");4===e.length&&(n.val(e[0].replace("px","")),a.val(e[1].replace("px","")),s.val(e[2].replace("px","")),o.value.val(e[3]),r.trigger("keyup"))})}),d(".su-generator-border-picker").each(function(e){var t=d(this),r=t.find(".su-generator-border-picker-field input, .su-generator-border-picker-field select"),n=t.find(".su-generator-bp-width"),a=t.find(".su-generator-bp-style"),s={cnt:t.find(".su-generator-border-picker-color"),value:t.find(".su-generator-border-picker-color-value"),wheel:t.find(".su-generator-border-picker-color-wheel")},o=t.find(".su-generator-attr");s.wheel.farbtastic(s.value),s.value.focus(function(){s.wheel.show()}),s.value.blur(function(){s.wheel.hide()}),r.on("change blur keyup",function(){o.val(n.val()+"px "+a.val()+" "+s.value.val()).trigger("change")}),o.on("keyup",function(){var e=d(this).val().split(" ");3===e.length&&(n.val(e[0].replace("px","")),a.val(e[1]),s.value.val(e[2]),r.trigger("keyup"))})}),l.find(".su-generator-attr").on("change keyup blur",function(){var e=d(this).parents(".su-generator-attr-container"),t=e.data("default");d(this).val()!=t?e.removeClass("su-generator-skip"):e.addClass("su-generator-skip")}),d(".su-generator-set-value").click(function(e){d(this).parents(".su-generator-attr-container").find("input").val(d(this).text()).trigger("change")}),p.val(r),d.ajax({type:"GET",url:ajaxurl,data:{action:"su_generator_get_preset",id:"last_used",shortcode:r},beforeSend:function(){},success:function(e){f.setSettings(e);var t=d("#su-generator-content");void 0!==f.state.mceSelection&&""!==f.state.mceSelection&&"hidden"!==t.attr("type")&&t.val(f.state.mceSelection)},dataType:"json"})},dataType:"html"})}),d("#su-generator").on("click",".su-generator-insert",f.insertShortcode),d("#su-generator").on("click",".su-generator-toggle-preview",function(e){var t=d("#su-generator-preview");d(this).hide(),t.addClass("su-generator-loading").show(),l.find("input, textarea, select").on("change keyup blur",function(){f.updatePreview()}),f.updatePreview(!0),e.preventDefault()}),d("#su-generator").on("mouseenter click",".su-generator-presets",function(){clearTimeout(a),d(".su-gp-popup").show()}),d("#su-generator").on("mouseleave",".su-generator-presets",function(){a=window.setTimeout(function(){d(".su-gp-popup").fadeOut(200)},600)}),d("#su-generator").on("click",".su-gp-new",function(e){d(this).parents(".su-generator-presets");var t=d(".su-gp-list"),r=(new Date).getTime(),n=prompt(SUGL10n.presets_prompt_msg,SUGL10n.presets_prompt_value);""!==n&&null!==n&&(t.find("b").hide(),t.append('<span data-id="'+r+'"><em>'+n+'</em><i class="sui sui-times"></i></span>'),f.addPreset(r,n))}),d("#su-generator").on("click",".su-gp-list span",function(e){var t=d(".su-generator-presets").data("shortcode"),r=d(this).data("id"),n=d(".su-generator-insert");d(".su-gp-popup").hide(),clearTimeout(a),d.ajax({type:"GET",url:ajaxurl,data:{action:"su_generator_get_preset",id:r,shortcode:t},beforeSend:function(){n.addClass("button-primary-disabled").attr("disabled",!0)},success:function(e){n.removeClass("button-primary-disabled").attr("disabled",!1),f.setSettings(e)},dataType:"json"}),e.preventDefault(),e.stopPropagation()}),d("#su-generator").on("click",".su-gp-list i",function(e){var t=d(this).parents(".su-gp-list"),r=d(this).parent("span"),n=r.data("id");r.remove(),t.find("span").length<1&&t.find("b").show(),f.removePreset(n),e.stopPropagation(),e.preventDefault()})},f.addPreset=function(e,t){var r=d(".su-generator-presets").data("shortcode"),n=f.getSettings();d.ajax({type:"POST",url:ajaxurl,data:{action:"su_generator_add_preset",id:e,name:t,shortcode:r,settings:n}})},f.removePreset=function(e){var t=d(".su-generator-presets").data("shortcode");d.ajax({type:"POST",url:ajaxurl,data:{action:"su_generator_remove_preset",id:e,shortcode:t}})},f.parseSettings=function(){var e=p.val(),t=g.val(),r=d("#su-generator-settings .su-generator-attr-container:not(.su-generator-skip) .su-generator-attr"),n=d("textarea#su-generator-content"),a=n.length?n.val():"false",s=new String("");return s+="["+t+e,r.each(function(){var e=d(this),t="";null==(t=e.is("select")?e.find("option:selected").val():e.val())?t="":"array"==typeof t&&(t=t.join(",")),""!==t&&(s+=" "+d(this).attr("name")+'="'+d(this).val().toString().replace(/"/gi,"'")+'"')}),s+="]","false"!=a&&(s+=a+"[/"+t+e+"]"),s},f.getSettings=function(){p.val();var e=d("#su-generator-settings .su-generator-attr"),t=d("textarea#su-generator-content"),r=t.length?t.val():"false",a={};return e.each(function(e){var t=d(this),r="",n=t.attr("name");null==(r=t.is("select")?t.find("option:selected").val():t.val())&&(r=""),a[n]=r}),a.content=r.toString(),a},f.setSettings=function(r){var e=d("#su-generator-settings .su-generator-attr"),t=d("#su-generator-content");e.each(function(){var e=d(this),t=e.attr("name");r.hasOwnProperty(t)&&(e.val(r[t]),e.trigger("keyup").trigger("change").trigger("blur"))}),r.hasOwnProperty("content")&&t.val(r.content).trigger("keyup").trigger("change").trigger("blur"),f.updatePreview()},f.updatePreview=function(e){var t=d("#su-generator-preview"),r=f.parseSettings(),n=a.text();e=e||!1,t.is(":visible")&&(r===n&&!e||(window.clearTimeout(f.state.preview.timer),f.state.preview.timer=window.setTimeout(function(){f.state.preview.request=d.ajax({type:"POST",url:ajaxurl,cache:!1,data:{action:"su_generator_preview",shortcode:r},beforeSend:function(){f.state.preview.request&&f.state.preview.request.abort(),t.addClass("su-generator-loading").html("")},success:function(e){t.html(e).removeClass("su-generator-loading")},dataType:"html"})},300),a.text(r)))},f.insert=function(e,t){if("string"==typeof e&&"object"===_typeof(t)){f.state.context=e;var r=(f.state.insertArgs=t).shortcode||"",n={type:"inline",alignTop:!0,mainClass:"su-generator-mfp",items:{src:"#su-generator"},callbacks:{}};n.callbacks.open=function(){r?c.filter('[data-shortcode="'.concat(r,'"]')).trigger("click"):window.setTimeout(function(){return o.focus()},200),"undefined"!=typeof tinyMCE&&null!=tinyMCE.activeEditor&&tinyMCE.activeEditor.hasOwnProperty("selection")&&(f.state.mceSelection=tinyMCE.activeEditor.selection.getContent({format:"text"}))},n.callbacks.close=function(){o.val(""),l.html("").hide(),s.removeClass("su-generator-narrow"),i.show(),u.show(),c.show(),f.state.mceSelection=""},d.magnificPopup.open(n)}},f.insertShortcode=function(){var e=f.parseSettings();if(f.addPreset("last_used",SUGL10n.last_used),d.magnificPopup.close(),a.text(e),"classic"===f.state.context)f.state.wpActiveEditor=window.wpActiveEditor,window.wpActiveEditor=f.state.insertArgs.editorID,window.wp.media.editor.insert(e),window.wpActiveEditor=f.state.wpActiveEditor;else if("block"===f.state.context){var t=f.state.insertArgs.props;if(t.attributes.hasOwnProperty("content"))t.setAttributes({content:t.attributes.content+e});else if("core/shortcode"===t.name){var r=t.attributes.hasOwnProperty("text")?t.attributes.text:"";t.setAttributes({text:r+e})}}},f.insertAtCaret=function(e,t){var r=e.selectionStart;e.selectionEnd;e.value=e.value.substring(0,r)+t+e.value.substring(r),e.focus(),e.selectionStart=r+t.length},{init:f.init,insert:f.insert}}(jQuery),jQuery(document).ready(SUG.App.init);